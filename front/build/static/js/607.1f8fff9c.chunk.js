"use strict";(self.webpackChunkweb_scada=self.webpackChunkweb_scada||[]).push([[607],{7607:function(n,t,e){e.r(t),e.d(t,{default:function(){return y}});var r=e(1153),i=e(4567),a=e(4165),s=e(5861),c=e(9439),o=e(2791),u=e(1501),l=e(7968),d=e(2426),v=e.n(d),h=e(7689),x=e(1933),f=e(8870),Z=e(5771),m=e(4721),p=e(6314),j=e(5849),g=e(5896),b=e(184);var k=function(n){var t,e=n.station,a=(0,h.s0)(),s=(0,x.useQuery)(["lastActive",e._id],(function(){return u.Z.getLastActive(e._id)}),{select:function(n){return null===n||void 0===n?void 0:n.lastActive},refetchOnWindowFocus:!1,refetchInterval:1e3}),c=s.data;return(0,b.jsx)(r.ZP,{item:!0,xs:14,sm:8,md:5,lg:4,children:(0,b.jsxs)(g.Z,{contentSX:{p:2.25},children:[(0,b.jsx)(f.Z,{children:(0,b.jsxs)(r.ZP,{container:!0,sx:{mb:1.5},children:[(0,b.jsx)(r.ZP,{item:!0,xs:!0,children:(0,b.jsx)(i.Z,{variant:"h3",children:e.name||"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043d\u0435 \u0437\u0430\u0434\u0430\u043d\u043e"})}),(0,b.jsx)(r.ZP,{item:!0,alignContent:"right",children:(0,b.jsx)(Z.Z,{label:null!==c&&void 0!==c&&c.activeBool?"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d":"\u041e\u0442\u043a\u043b\u044e\u0447\u0435\u043d",variant:"contained",color:null!==c&&void 0!==c&&c.activeBool?"success":"error"})})]})}),(0,b.jsx)(m.Z,{component:"div",primary:"dark"}),(0,b.jsxs)(p.Z,{sx:{mt:1.5},spacing:1,children:[(0,b.jsx)(i.Z,{variant:"h6",children:"\u0418\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u043e\u043f\u0440\u043e\u0441\u0430: "+e.interval}),(0,b.jsx)(i.Z,{variant:"h6",children:"\u0420\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435: "+e.placeName}),(0,b.jsx)(i.Z,{variant:"h6",children:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f: "+e.company}),(0,b.jsx)(i.Z,{variant:"h6",children:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u043e\u043f\u0440\u043e\u0441:  ".concat((null===c||void 0===c?void 0:c.lastActive)&&(t=null===c||void 0===c?void 0:c.lastActive,v()(Number(t)).format("DD.MM.YYYY, HH:mm:ss"))||"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...")}),(0,b.jsx)(j.Z,{size:"medium",type:"submit",variant:"contained",color:"primary",onClick:function(){return n=null===e||void 0===e?void 0:e._id,void a("/devices",{state:n});var n},children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"})]})]})})};var w=function(){var n=(0,o.useState)([]),t=(0,c.Z)(n,2),e=t[0],r=t[1],i=(0,l.U)((0,s.Z)((0,a.Z)().mark((function n(){var t;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.Z.getStation();case 2:t=n.sent,r(t.station);case 4:case"end":return n.stop()}}),n)})))),d=(0,c.Z)(i,3),v=d[0],h=d[1],x=d[2];return(0,o.useEffect)((function(){v()}),[]),h?(0,b.jsx)("h1",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):x?(0,b.jsx)("h1",{children:x}):(0,b.jsx)(b.Fragment,{children:e.map((function(n){return(0,b.jsx)(k,{station:n},n._id)}))})},y=function(){return(0,b.jsxs)(r.ZP,{container:!0,rowSpacing:4.5,columnSpacing:2.75,children:[(0,b.jsx)(r.ZP,{item:!0,xs:12,sx:{mb:-2.25},children:(0,b.jsx)(i.Z,{variant:"h5",children:"\u0421\u0442\u0430\u043d\u0446\u0438\u0438"})}),(0,b.jsx)(w,{})]})}},7968:function(n,t,e){e.d(t,{U:function(){return d}});var r=e(4165),i=e(5861),a=e(9439),s=e(2791),c=e(7689),o=e(2528),u=e(9434),l=e(4346),d=(e(184),function(n){var t=(0,s.useState)(!1),e=(0,a.Z)(t,2),d=e[0],v=e[1],h=(0,s.useState)(""),x=(0,a.Z)(h,2),f=x[0],Z=x[1],m=((0,c.TH)(),(0,u.I0)()),p=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(){var e=arguments;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,v(!0),t.next=4,n.apply(void 0,e);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),t.t0 instanceof o.a?1004===t.t0.status&&(console.log(t.t0.status),m((0,l.kX)()),c.Fg):Z(t.t0.message);case 9:return t.prev=9,v(!1),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[0,6,9,12]])})));return function(){return t.apply(this,arguments)}}();return[p,d,f]})}}]);
//# sourceMappingURL=607.1f8fff9c.chunk.js.map