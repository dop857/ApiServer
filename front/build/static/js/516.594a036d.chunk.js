"use strict";(self.webpackChunkweb_scada=self.webpackChunkweb_scada||[]).push([[516],{9326:function(e,t,n){var r=n(6314),a=n(4567),i=n(5239),o=n(1153),s=n(5896),d=n(184),l=function(e){var t=e.data;return(0,d.jsx)(s.Z,{contentSX:{p:2.25},children:(0,d.jsxs)(r.Z,{spacing:.5,children:[null!==t&&void 0!==t&&t.name?(0,d.jsx)(a.Z,{variant:"h6",color:"textSecondary",children:null===t||void 0===t?void 0:t.name}):(0,d.jsx)(i.Z,{width:"80%"}),(0,d.jsx)(o.ZP,{container:!0,alignItems:"center",children:"undefined"!==(null===t||void 0===t?void 0:t.value)?(0,d.jsxs)(o.ZP,{container:!0,item:!0,alignItems:"end",children:[(0,d.jsx)(a.Z,{variant:"h4",color:"inherit",children:"".concat(null===t||void 0===t?void 0:t.value)}),(0,d.jsx)(a.Z,{variant:"h6",sx:{ml:.5,mb:.1},color:"textSecondary",children:"".concat(null===t||void 0===t?void 0:t.unit)})]}):(0,d.jsx)(i.Z,{width:"40%",height:30})})]})})};l.defaultProps={color:"primary"},t.Z=l},3516:function(e,t,n){n.r(t),n.d(t,{default:function(){return ae}});var r=n(1413),a=n(9439),i=n(3967),o=n(1153),s=n(4567),d=n(977),l=n(2744),c=n(6314),u=n(3006),m=n(5849),h=n(8870),x=n(3236),g=n(2411),f=n(9900),p=n(4333),Z=n(220),v=n(5896),j=n(1593),b=n(3515),y=n(5239),P=n(5363),w=n(4110),S=n(7808),k=n(35),D=n(6593),I=n(2791),M={Int16:{signed:"16",name:"Int16",max:32768,min:-32768},Int32:{signed:"32",name:"Int32",max:{$numberLong:"2147483648"},min:-2147483648},Int64:{signed:"64",name:"Int64",max:9223372036854776e4,min:-9223372036854776e4},Uint16:{signed:"16",name:"Uint16",max:65535,min:0},Uint32:{signed:"32",name:"Uint32",max:{$numberLong:"4294967295"},min:0},Uint64:{signed:"64",name:"Uint64",max:0x10000000000000000,min:0},Float32:{signed:"32",name:"Float32",max:34e37,min:34e-39},Double64:{signed:"64",name:"Double64",max:17e307,min:17e-309}};function C(e,t){var n,r;return(null===(n=M[t])||void 0===n?void 0:n.max)<e||(null===(r=M[t])||void 0===r?void 0:r.min)>e}var F=n(1933),L=n(1501),A=n(184),O=function(e){var t,n=e.title,r=e.idRead,i=e.idWrite,l=(0,I.useState)(0),u=(0,a.Z)(l,2),m=u[0],x=u[1],g=(0,I.useState)(!0),f=(0,a.Z)(g,2),p=f[0],Z=f[1],M=((0,F.useQueryClient)(),(0,F.useQuery)(["inputValue",r],(function(){return L.Z.getProgramPack(r)}),{select:function(e){return e.programPack[0]},onSuccess:function(e){return p&&x(null===e||void 0===e?void 0:e.lastAnswerDec)},refetchInterval:p?5e3:0})),O=M.isLoading,E=(M.isError,M.data),Y=(M.error,(0,F.useMutation)((function(e){return L.Z.sendNumberToDevice(e)}))),H=function(e){e.preventDefault(),Y.mutate({number:m,programPackId:i})};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(j.Z,{anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:1e3,open:null===Y||void 0===Y?void 0:Y.isError,children:(0,A.jsx)(b.Z,{onClose:function(){return Y.reset()},severity:"error",sx:{width:"100%"},children:null===Y||void 0===Y||null===(t=Y.error)||void 0===t?void 0:t.message})}),(0,A.jsx)(v.Z,{contentSX:{p:2.25},children:(0,A.jsxs)(c.Z,{spacing:.5,children:[n&&(0,A.jsx)(s.Z,{variant:"h6",color:"textSecondary",children:n}),O?(0,A.jsx)(y.Z,{width:"80%"}):(0,A.jsx)(o.ZP,{container:!0,alignItems:"center",children:(0,A.jsx)(o.ZP,{item:!0,children:(0,A.jsx)(h.Z,{onSubmit:H,component:"form",noValidate:!0,autoComplete:"off",children:(0,A.jsxs)(P.Z,{error:C(m,null===E||void 0===E?void 0:E.variableType),margin:"none",variant:"standard",sx:{m:0,mt:0,width:"100%"},children:[(0,A.jsx)(w.Z,{id:"standard-adornment-weight",endAdornment:(0,A.jsx)(S.Z,{onClick:H,position:"end",children:(0,A.jsx)(d.Z,{"aria-label":"enter",edge:"end",children:(0,A.jsx)(D.Z,{})})}),"aria-describedby":"standard-weight-helper-text",inputProps:{"aria-label":"weight"},type:"number",value:m,onChange:function(e){return x(e.target.value)},onFocus:function(){Z(!1)},onBlur:function(){Z(!0)}}),(0,A.jsx)(k.Z,{id:"standard-weight-helper-text",children:null===E||void 0===E?void 0:E.nameData})]})})})})]})})]})};O.defaultProps={color:"primary"};var E=O,Y=n(9326),H=n(9434),Q=n(7689),U=n(4346),X=n(2528);var z=function(e){var t=function(e){(0,Q.TH)();var t=(0,H.I0)(),n=(0,F.useQuery)(["devices",e],(function(){return L.Z.getProgramPack(e)}),{select:function(e){return e.programPack[0]},refetchInterval:1e3,onError:function(e){e instanceof X.a&&1004===e.status&&(t((0,U.kX)()),Q.Fg)}});return{isLoading:n.isLoading,isError:n.isError,data:n.data}}(e.idProgramPack),n=(t.isLoading,t.isError,t.data);return(0,A.jsx)(Y.Z,{data:n})},B=n(732),T=n(711),K=n(7575),R=n(4541),W=n(3496),_=n(2426),N=n.n(_),V={chart:{height:450,type:"area",toolbar:{show:!1}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},grid:{strokeDashArray:0}},q=function(e){var t=e.queryData,n=e.name,o=(0,i.Z)(),s=o.palette.text.secondary,d=o.palette.divider,l=(0,I.useState)(V),c=(0,a.Z)(l,2),u=c[0],m=c[1],h=(0,I.useState)([]),x=(0,a.Z)(h,2),g=x[0],f=x[1],p=(0,F.useQuery)(["chartData",t],(function(){return L.Z.getArchive(t)}),{select:function(e){return e.archive},refetchOnWindowFocus:!1,onSuccess:function(e){var t=null===e||void 0===e?void 0:e.map((function(e){return[e.date,e.dec]}));console.log(t),f([{name:n,data:t}])},enabled:!!t});p.isLoading,p.isError;return(0,I.useEffect)((function(){m((function(e){return(0,r.Z)((0,r.Z)({},e),{},{chart:{id:"area-datetime",type:"area",width:"100%",zoom:{autoScaleYaxis:!0},events:{}},colors:[o.palette.primary.main],xaxis:{type:"datetime",tickAmount:4,tickPlacement:"between",labels:{style:{colors:[s]},rotateAlways:!1,formatter:function(e){return"".concat(N()(e).format("DD.MM.YYYY")," ").concat(N()(e).format("HH:mm:ss"))}},axisBorder:{show:!0,color:d}},yaxis:{labels:{style:{colors:[s]}}},grid:{borderColor:d,padding:{top:0,right:0,bottom:0,left:15}},tooltip:{theme:"light"},noData:{text:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u043e\u0442\u0440\u0435\u0437\u043e\u043a"}})}))}),[]),(0,A.jsx)(W.Z,{options:u,series:g,type:"area",height:450})};function $(e){var t=Object.assign([],e);t.reverse();for(var n=[],a=0;a<t.length;a++)if(t[a].status)for(var i=0+a;i<t.length;i++){if(!t[i].status&&t[a].bit===t[i].bit){n.push((0,r.Z)((0,r.Z)({},t[a]),{},{date2:t[i].date}));break}i===t.length-1&&(n.push((0,r.Z)((0,r.Z)({},t[a]),{},{date2:null})),console.log(!0))}return n.reverse()}var G=(0,n(225).default)(n(9197).Switch)((function(e){var t=e.theme;return{width:70,height:32,padding:0,display:"flex","&:active":{"& .MuiSwitch-thumb":{width:37.5},"& .MuiSwitch-switchBase.Mui-checked":{transform:"translateX(25px)"}},"& .MuiSwitch-switchBase":{padding:4,"&.Mui-checked":{transform:"translateX(38px)",color:"#fff","& + .MuiSwitch-track":{opacity:1,backgroundColor:"dark"===t.palette.mode?"#177ddc":"#1890ff"}}},"& .MuiSwitch-thumb":{boxShadow:"0 2px 4px 0 rgb(0 35 11 / 20%)",width:24,height:24,borderRadius:12,transition:t.transitions.create(["width"],{duration:200})},"& .MuiSwitch-track":{borderRadius:16,opacity:1,backgroundColor:"dark"===t.palette.mode?"rgba(255,255,255,.35)":"rgba(0,0,0,.25)",boxSizing:"border-box"}}})),J=n(7076),ee=n(6812),te=n(395),ne=function(e){var t=e.rows,n=(0,I.useState)({}),i=(0,a.Z)(n,2),o=(i[0],i[1]),s=(0,I.useState)({}),d=(0,a.Z)(s,2),l=d[0],c=d[1],u=function(e){return N()(e).format("HH:mm:ss DD.MM.YYYY")},m=(0,I.useMemo)((function(){return t.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{dateFormat:u(e.date),date2Format:u(e.date2),timeStop:e.date2-e.date,timeStopFormat:(0,te._F)((e.date2-e.date)/1e3)})}))}),[t]),h=[{title:"\u0414\u0430\u0442\u0430",dataIndex:"dateFormat",key:"date",width:150,align:"center",sorter:function(e,t){return e.date-t.date},sortOrder:"date"===l.columnKey?l.order:null},{title:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f",dataIndex:"message",key:"message",width:300,filters:[{text:"\u0417\u0430\u043a\u043b\u0435\u0439\u0449\u0438\u043a. \u0420\u0430\u0441\u0445\u043e\u0434\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u043d\u0430 \u0438\u0441\u0445\u043e\u0434\u0435",value:"\u0417\u0430\u043a\u043b\u0435\u0439\u0449\u0438\u043a. \u0420\u0430\u0441\u0445\u043e\u0434\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u043d\u0430 \u0438\u0441\u0445\u043e\u0434\u0435"},{text:"\u0423\u043a\u043b\u0430\u0434\u043a\u0430. \u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u043e\u043f\u0440\u0438\u0432\u043e\u0434\u0430",value:"\u0423\u043a\u043b\u0430\u0434\u043a\u0430. \u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u043e\u043f\u0440\u0438\u0432\u043e\u0434\u0430"}],onFilter:function(e,t){return t.message.includes(e)},sorter:function(e,t){return e.message.length-t.message.length},sortOrder:"message"===l.columnKey?l.order:null},{title:"\u0414\u0430\u0442\u0430 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f",dataIndex:"date2Format",key:"date2",width:150,align:"center",sorter:function(e,t){return e.date2-t.date2},sortOrder:"date2"===l.columnKey?l.order:null},{title:"\u0412\u0440\u0435\u043c\u044f \u043f\u0440\u043e\u0441\u0442\u043e\u044f",dataIndex:"timeStopFormat",key:"timeStop",width:150,align:"center",sorter:function(e,t){return e.timeStop-t.timeStop},sortOrder:"timeStop"===l.columnKey?l.order:null}];return(0,A.jsx)(J.Z,{locale:ee.Z.Table,columns:h,dataSource:m,onChange:function(e,t,n){console.log("Various parameters",e,t,n),o(t),c(n)},size:"medium",pagination:!1,scroll:{y:450,x:600},tableLayout:"auto"})},re="647ea168652edbe984336ebf",ae=function(){var e=(0,I.useState)(null),t=(0,a.Z)(e,2),n=t[0],j=t[1],b=(0,I.useState)(null),y=(0,a.Z)(b,2),P=y[0],w=y[1],S=Boolean(n),k=(0,i.Z)(),D=(0,I.useState)(null),M=(0,a.Z)(D,2),C=M[0],O=M[1],Y=(0,I.useState)(null),H=(0,a.Z)(Y,2),Q=H[0],U=H[1],X=(0,I.useState)({dateStart:Date.now()-36e3,period:36e3,id:"647ebc37652edbe984336edc"}),W=(0,a.Z)(X,2),_=W[0],N=W[1],V=(0,F.useQuery)(["archiveError1",re],(function(){return L.Z.getArchiveAlarm(re)}),{select:function(e){return e.errorArchive},refetchOnWindowFocus:!1,enabled:!0,refetchInterval:2e3}).data,J=(0,I.useState)(!0),ee=(0,a.Z)(J,2);ee[0],ee[1];return(0,A.jsxs)(o.ZP,{container:!0,rowSpacing:4.5,columnSpacing:2.75,children:[(0,A.jsx)(o.ZP,{item:!0,xs:12,sx:{mb:-2.25},children:(0,A.jsx)(s.Z,{variant:"h5",children:"\u0421 \u0414\u043d\u0435\u043c \u0420\u043e\u0436\u0434\u0435\u043d\u0438\u044f!"})}),(0,A.jsx)(o.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,A.jsx)(z,{idProgramPack:"6438d0288dae6b9062100612"})}),(0,A.jsx)(o.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,A.jsx)(E,{idRead:"6464a0f0f6e5d8a84e77e1c1",idWrite:"643e7d1c8dae6b906210062f"})}),(0,A.jsx)(o.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,A.jsx)(z,{idProgramPack:"6438ccd68dae6b90621005ff"})}),(0,A.jsx)(o.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,A.jsx)(z,{idProgramPack:"6438d00b8dae6b9062100610"})}),(0,A.jsx)(o.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,A.jsx)(z,{idProgramPack:"6438cfe58dae6b906210060d"})}),(0,A.jsx)(o.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,A.jsx)(z,{idProgramPack:"6438cff58dae6b906210060e"})}),(0,A.jsx)(o.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,A.jsx)(z,{idProgramPack:"6438d0008dae6b906210060f"})}),(0,A.jsx)(o.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,A.jsxs)(v.Z,{content:!1,children:[(0,A.jsxs)(o.ZP,{container:!0,justifyContent:"right",children:[(0,A.jsx)(d.Z,{"aria-label":"more",id:"long-button","aria-controls":S?"long-menu":void 0,"aria-expanded":S?"true":void 0,"aria-haspopup":"true",onClick:function(e){j(e.currentTarget)},size:"lg",children:S?(0,A.jsx)(B.Z,{}):(0,A.jsx)(T.Z,{})}),(0,A.jsx)(l.Z,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:n,open:S,onClose:function(){j(null)},PaperProps:{style:{padding:10}},children:(0,A.jsxs)(c.Z,{spacing:1,children:[(0,A.jsx)(u.Z,{id:"datetime-local",placeholder:"Next Appointment",type:"datetime-local",sx:{width:200},InputLabelProps:{shrink:!0},value:C,onChange:function(e){return O(e.target.value)}}),(0,A.jsx)(u.Z,{id:"datetime-local",placeholder:"Next Appointment",type:"datetime-local",sx:{width:200},InputLabelProps:{shrink:!0},value:Q,onChange:function(e){return U(e.target.value)}}),(0,A.jsx)(m.Z,{type:"submit",variant:"outlined",color:"primary",onClick:function(e){e.preventDefault(),N((0,r.Z)((0,r.Z)({},_),{},{dateStart:new Date(C).valueOf(),period:new Date(Q).valueOf()-new Date(C).valueOf()}))},children:"\u041f\u043e\u0441\u0442\u0440\u043e\u0438\u0442\u044c"})]})})]}),(0,A.jsx)(h.Z,{sx:{pt:1,pr:2},children:(0,A.jsx)(q,{queryData:_,name:"\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"})})]})}),(0,A.jsx)(o.ZP,{item:!0,xs:12,md:12,lg:4,children:(0,A.jsx)(v.Z,{content:!1,children:(0,A.jsxs)(x.Z,{component:"nav",sx:{px:0,py:0},children:[(0,A.jsxs)(g.ZP,{sx:{height:80},divider:!0,children:[(0,A.jsx)(f.Z,{primary:(0,A.jsx)(s.Z,{variant:"subtitle1",children:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0441\u0435\u0440\u0432\u043e\u043f\u0440\u0438\u0432\u043e\u0434"})}),(0,A.jsx)(p.Z,{children:(0,A.jsx)(G,{onClick:function(){w(!P)}})})]}),(0,A.jsxs)(g.ZP,{sx:{height:80},divider:!0,children:[(0,A.jsx)(f.Z,{primary:(0,A.jsx)(s.Z,{variant:"subtitle1",children:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0441\u0435\u0440\u0432\u043e\u043f\u0440\u0438\u0432\u043e\u0434\u0430 \u043e\u0441\u044c X"})}),(0,A.jsx)(p.Z,{children:(0,A.jsx)(Z.Z,{sx:{bgcolor:P?k.palette.success.main:k.palette.error.main},children:P?(0,A.jsx)(K.Z,{}):(0,A.jsx)(R.Z,{})})})]}),(0,A.jsxs)(g.ZP,{sx:{height:80},divider:!0,children:[(0,A.jsx)(f.Z,{primary:(0,A.jsx)(s.Z,{variant:"subtitle1",children:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0441\u0435\u0440\u0432\u043e\u043f\u0440\u0438\u0432\u043e\u0434\u0430 \u043e\u0441\u044c Y"})}),(0,A.jsx)(p.Z,{children:(0,A.jsx)(Z.Z,{sx:{bgcolor:P?k.palette.success.main:k.palette.error.main},children:P?(0,A.jsx)(K.Z,{}):(0,A.jsx)(R.Z,{})})})]})]})})}),(0,A.jsx)(o.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,A.jsx)(v.Z,{content:!1,children:(0,A.jsx)(h.Z,{children:(null===V||void 0===V?void 0:V.length)>0&&(0,A.jsx)(ne,{rows:$(V)})})})})]})}},395:function(e,t,n){n.d(t,{_F:function(){return s},uQ:function(){return o}});var r=n(9439);function a(e){var t=Math.floor(e/3600);return[t,Math.floor(e/60)-60*t,Math.floor(e%60)]}function i(e,t){var n=[];return n[e]||(n[e]=e%100>4&&e%100<20?2:[2,0,1,1,1,2][Math.min(e%10,5)]),t[n[e]]}function o(e){var t=a(e),n=(0,r.Z)(t,3),o=n[0],s=n[1],d=n[2],l="";return o>0&&(l=o+" "+i(o,["\u0447\u0430\u0441","\u0447\u0430\u0441\u0430","\u0447\u0430\u0441\u043e\u0432"])),s>0&&(l+=" "+s+" "+i(s,["\u043c\u0438\u043d\u0443\u0442\u0430","\u043c\u0438\u043d\u0443\u0442\u044b","\u043c\u0438\u043d\u0443\u0442"])),d>0&&0===o&&(l+=" "+d+" "+i(d,["\u0441\u0435\u043a\u0443\u043d\u0434\u0430","\u0441\u0435\u043a\u0443\u043d\u0434\u044b","\u0441\u0435\u043a\u0443\u043d\u0434"])),l}function s(e){var t,n,i=a(e),o=(0,r.Z)(i,3),s=o[0],d=o[1],l=o[2];return t=d,n=l,[s.toString().padStart(2,"0"),t.toString().padStart(2,"0"),n.toString().padStart(2,"0")].join(":")}}}]);
//# sourceMappingURL=516.594a036d.chunk.js.map